body {
  margin: 0;
  overflow: hidden;
  background: #222;
}
canvas {
  display: block;
  margin: 0 auto;
  background: #587399;
}
.hidden {
  display: none;
}
/* Make menu panels scale like the canvas */
#menu,
#levelSelect,
#settings,
#controls,
#waveSelect,
#freeSelect,
#pauseMenu {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  
  background: rgba(0, 0, 0, 0.75);
  padding: 2.5%;
  border-radius: 1em;

  text-align: center;
  color: white;
  font-family: Arial, sans-serif;

  /* Responsive sizing */
  width: 90vw;       /* never wider than the viewport */
  max-width: 800px;  /* same as your canvas max width */
  height: auto;      /* scale height automatically */
  box-sizing: border-box;
}

/* Make buttons scale nicely on smaller screens */
#menu button,
#levelSelect button,
#settings button,
#controls button,
#waveSelect button,
#freeSelect button,
#pauseMenu button {
  display: block;
  margin: 2% auto;
  padding: 1% 3%;
  font-size: 1.5vw;      /* scales with screen width */
  min-font-size: 16px;   /* prevents too-small text */
  cursor: pointer;

  background: #444;
  color: white;
  border: 1px solid #888;
  border-radius: 6px;
}

/* Optional: make buttons slightly bigger on tiny screens */
@media (max-width: 500px) {
  #menu button,
  #levelSelect button,
  #settings button,
  #controls button,
  #pauseMenu button {
    font-size: 16px;
    padding: 8px 16px;
  }
}

canvas {
  border: 1px solid black;
  display: block;
  margin: 0 auto;
}

#game {
  display: none;
}
.hidden {
  display: none;
}

/* Hide any menu when needed */
.hidden {
  display: none;
}

/* All menu panels share this styling */
#menu,
#levelSelect,
#settings,
#controls,
#freeSelect,
#waveSelect,
#pauseMenu {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  background: rgba(0, 0, 0, 0.75);
  padding: 25px 40px;
  border-radius: 10px;

  text-align: center;       /* center the text */
  color: white;             /* white text */
  font-family: Arial, sans-serif;
}

/* Style menu buttons */
#menu button,
#levelSelect button,
#settings button,
#controls button,
#freeSelect button,
#waveSelect button,
#pauseMenu button {
  display: block;
  margin: 10px auto;
  padding: 10px 20px;
  font-size: 18px;
  cursor: pointer;

  background: #444;
  color: white;
  border: 1px solid #888;
  border-radius: 6px;
}

#menu button:hover,
#levelSelect button:hover,
#settings button:hover,
#controls button:hover,
#pauseMenu button:hover {
  background: #666;
}

#touchControls {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 10;
}

/* Enable interaction only on buttons */
#touchControls button {
  pointer-events: auto;
  font-size: 22px;
  padding: 16px;
  border-radius: 50%;
  border: none;
  background: rgba(0,0,0,0.6);
  color: white;
}

.left-controls {
  position: fixed;
  left: 10px;
  bottom: 20px;
  display: flex;
  gap: 12px;
}

.right-controls {
  position: fixed;
  right: 10px;
  bottom: 20px;
  display: flex;
  gap: 12px;
}

#btnPause {
  position: fixed;
  top: 10px;
  left: 10px;
}

#btnRestart {
  position: fixed;
  top: 10px;
  right: 10px;
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #808080;
  touch-action: none;
}

canvas {
  display: block;
  margin: auto;

  /* IMPORTANT */
  width: auto;
  height: auto;

  max-width: 100vw;
  max-height: 100vh;

}

body {
  display: flex;
  justify-content: center;
  align-items: center;
}

#touchControls button {
  font-size: 24px;
  width: 60px;
  height: 60px;
  border-radius: 10px;
  border: none;
  background: #000000;
  transition: background 0.1s, transform 0.1s;
}

#touchControls button:active,
#touchControls button.pressed {
  background: #ff0; /* highlight color */
  transform: scale(0.9); /* slight press effect */
}

#game-wrapper {
  width: fit-content;
  height: fit-content;
  margin: auto;
}

/* default */
#game-wrapper {
  transform-origin: top left;
  transform: scale(1);
}

/* Pixel-art mode */
.pixelated canvas {
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

body::after {
  content: "";
  pointer-events: none;
  position: fixed;
  inset: 0;
  opacity: 0;
  z-index: 999;

  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.03) 0px,
      rgba(255,255,255,0.03) 1px,
      rgba(0,0,0,0.04) 2px,
      rgba(0,0,0,0.04) 3px
    );

  mix-blend-mode: overlay;
}

/* CRT ON */

.crt::after {
  opacity: 1;
}
.crt canvas {
  animation: crtFlicker 0.15s infinite alternate;
}

@keyframes crtFlicker {
  from { filter: brightness(1) contrast(1); }
  to   { filter: brightness(1.03) contrast(1.05); }
}

body::before {
  content: "";
  pointer-events: none;
  position: fixed;
  inset: 0;
  z-index: 998;
  opacity: 0;

  background: radial-gradient(
    ellipse at center,
    rgba(0,0,0,0) 55%,
    rgba(0,0,0,0.25) 85%,
    rgba(0,0,0,0.45) 100%
  );
}

.crt::before {
  opacity: 1;
}

.crt canvas {
  filter:
    contrast(1.05)
    brightness(1.03)
    saturate(1.1);
}

.crt canvas {
  box-shadow:
    -2px 0 rgba(255,0,0,0.08),
     2px 0 rgba(0,255,255,0.08);
}

/* VHS tracking band */


body::selection {
  background: transparent;
}

/* Tracking bar */

/* VHS TRACKING GLITCH */
.crt.vhs::before {
  animation: vhsTrack 0.12s steps(2) infinite;
}

@keyframes vhsTrack {
  0% {
    transform: translateY(0);
    filter: none;
  }
  40% {
    transform: translateY(-2px);
  }
  60% {
    transform: translateY(1px);
  }
  100% {
    transform: translateY(0);
  }
}

.crt.vhs canvas {
  animation: vhsTear 0.12s steps(2) infinite;
}

@keyframes vhsTear {
  0% {
    clip-path: inset(0 0 0 0);
  }
  50% {
    clip-path: inset(30% 0 35% 0);
    transform: translateX(-3px);
  }
  100% {
    clip-path: inset(0 0 0 0);
    transform: translateX(0);
  }
}

.crt.vhs canvas {
  box-shadow:
    -2px 0 rgba(255,0,0,0.2),
     2px 0 rgba(0,255,255,0.2);
}
/* Update the right-controls to handle the joystick as a child */
.right-controls {
  position: fixed;
  right: 10px;
  bottom: 20px;
  display: flex;
  align-items: flex-end; /* Align bottom of joystick with bottom of buttons */
  gap: 15px;
  flex-direction: row-reverse; /* Puts joystick to the LEFT of the buttons */
}

#potatoJoystickArea {
  pointer-events: auto;
  z-index: 11; /* Slightly higher than standard buttons */
  margin-bottom: 5px; /* Tiny adjustment to center with circular buttons */
}

button, canvas {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}
